{"ast":null,"code":"import React, { useEffect, useReducer, useState } from 'react';\nimport { actionSheetEventManager } from \"./eventmanager\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport var sheetsRegistry = {};\nexport function registerSheet(id, Sheet) {\n  var contexts = [];\n\n  for (var _i = 2; _i < arguments.length; _i++) {\n    contexts[_i - 2] = arguments[_i];\n  }\n\n  if (!id || !Sheet) return;\n  if (!contexts || contexts.length === 0) contexts = ['global'];\n\n  for (var _a = 0, contexts_1 = contexts; _a < contexts_1.length; _a++) {\n    var context = contexts_1[_a];\n    var registry = !sheetsRegistry[context] ? sheetsRegistry[context] = {} : sheetsRegistry[context];\n    registry[id] = Sheet;\n    actionSheetEventManager.publish(\"\".concat(context, \"-on-register\"));\n  }\n}\nexport function SheetProvider(_a) {\n  var _b = _a.context,\n      context = _b === void 0 ? 'global' : _b,\n      children = _a.children;\n\n  var _c = useReducer(function (x) {\n    return x + 1;\n  }, 0),\n      forceUpdate = _c[1];\n\n  var sheetIds = Object.keys(sheetsRegistry[context] || {});\n  var onRegister = React.useCallback(function () {\n    forceUpdate();\n  }, [forceUpdate]);\n  useEffect(function () {\n    var unsub = actionSheetEventManager.subscribe(\"\".concat(context, \"-on-register\"), onRegister);\n    return function () {\n      unsub === null || unsub === void 0 ? void 0 : unsub.unsubscribe();\n    };\n  }, [context, onRegister]);\n\n  var renderSheet = function renderSheet(sheetId) {\n    return _jsx(RenderSheet, {\n      id: sheetId,\n      context: context\n    }, sheetId);\n  };\n\n  return _jsxs(_Fragment, {\n    children: [children, sheetIds.map(renderSheet)]\n  });\n}\n\nvar RenderSheet = function RenderSheet(_a) {\n  var id = _a.id,\n      context = _a.context;\n\n  var _b = useState(),\n      payload = _b[0],\n      setPayload = _b[1];\n\n  var _c = useState(false),\n      visible = _c[0],\n      setVisible = _c[1];\n\n  var Sheet = sheetsRegistry[context] && sheetsRegistry[context][id];\n  var onShow = React.useCallback(function (data, ctx) {\n    if (ctx === void 0) {\n      ctx = 'global';\n    }\n\n    if (ctx !== context) return;\n    setPayload(data);\n    setVisible(true);\n  }, [context]);\n  var onClose = React.useCallback(function (_data, ctx) {\n    if (ctx === void 0) {\n      ctx = 'global';\n    }\n\n    if (context !== ctx) return;\n    setVisible(false);\n    setPayload(undefined);\n  }, [context]);\n  var onHide = React.useCallback(function (data, ctx) {\n    if (ctx === void 0) {\n      ctx = 'global';\n    }\n\n    actionSheetEventManager.publish(\"hide_\".concat(id), data, ctx);\n  }, [id]);\n  useEffect(function () {\n    if (visible) {\n      actionSheetEventManager.publish(\"show_\".concat(id), payload, context);\n    }\n  }, [context, id, payload, visible]);\n  useEffect(function () {\n    var subs = [actionSheetEventManager.subscribe(\"show_wrap_\".concat(id), onShow), actionSheetEventManager.subscribe(\"onclose_\".concat(id), onClose), actionSheetEventManager.subscribe(\"hide_wrap_\".concat(id), onHide)];\n    return function () {\n      subs.forEach(function (s) {\n        return s.unsubscribe();\n      });\n    };\n  }, [id, context, onShow, onHide, onClose]);\n  if (!Sheet) return null;\n  return !visible ? null : _jsx(Sheet, {\n    sheetId: id,\n    payload: payload\n  });\n};","map":{"version":3,"names":["React","useEffect","useReducer","useState","actionSheetEventManager","sheetsRegistry","registerSheet","id","Sheet","contexts","_i","arguments","length","_a","contexts_1","context","registry","publish","concat","SheetProvider","_b","children","_c","x","forceUpdate","sheetIds","Object","keys","onRegister","useCallback","unsub","subscribe","unsubscribe","renderSheet","sheetId","map","RenderSheet","payload","setPayload","visible","setVisible","onShow","data","ctx","onClose","_data","undefined","onHide","subs","forEach","s"],"sources":["/Users/helder/repos/tests/fruitmark-mini-repo/fruitmark-app/node_modules/react-native-actions-sheet/dist/src/provider.js"],"sourcesContent":["/* eslint-disable curly */\nimport React, { useEffect, useReducer, useState } from 'react';\nimport { actionSheetEventManager } from './eventmanager';\n/**\n * An object that holds all the sheet components against their ids.\n */\nexport var sheetsRegistry = {};\n// Registers your Sheet with the SheetProvider.\nexport function registerSheet(id, Sheet) {\n    var contexts = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        contexts[_i - 2] = arguments[_i];\n    }\n    if (!id || !Sheet)\n        return;\n    if (!contexts || contexts.length === 0)\n        contexts = ['global'];\n    for (var _a = 0, contexts_1 = contexts; _a < contexts_1.length; _a++) {\n        var context = contexts_1[_a];\n        var registry = !sheetsRegistry[context]\n            ? (sheetsRegistry[context] = {})\n            : sheetsRegistry[context];\n        registry[id] = Sheet;\n        actionSheetEventManager.publish(\"\".concat(context, \"-on-register\"));\n    }\n}\n/**\n * The SheetProvider makes available the sheets in a given context. The default context is\n * `global`. However if you want to render a Sheet within another sheet or if you want to render\n * Sheets in a modal. You can use a seperate Provider with a custom context value.\n *\n * For example\n```ts\n// Define your SheetProvider in the component/modal where\n// you want to show some Sheets.\n<SheetProvider context=\"local-context\" />\n\n// Then register your sheet when for example the\n// Modal component renders.\n\nregisterSheet('local-sheet', LocalSheet,'local-context');\n\n```\n * @returns\n */\nexport function SheetProvider(_a) {\n    var _b = _a.context, context = _b === void 0 ? 'global' : _b, children = _a.children;\n    var _c = useReducer(function (x) { return x + 1; }, 0), forceUpdate = _c[1];\n    var sheetIds = Object.keys(sheetsRegistry[context] || {});\n    var onRegister = React.useCallback(function () {\n        // Rerender when a new sheet is added.\n        forceUpdate();\n    }, [forceUpdate]);\n    useEffect(function () {\n        var unsub = actionSheetEventManager.subscribe(\"\".concat(context, \"-on-register\"), onRegister);\n        return function () {\n            unsub === null || unsub === void 0 ? void 0 : unsub.unsubscribe();\n        };\n    }, [context, onRegister]);\n    var renderSheet = function (sheetId) { return (<RenderSheet key={sheetId} id={sheetId} context={context}/>); };\n    return (<>\n      {children}\n      {sheetIds.map(renderSheet)}\n    </>);\n}\nvar RenderSheet = function (_a) {\n    var id = _a.id, context = _a.context;\n    var _b = useState(), payload = _b[0], setPayload = _b[1];\n    var _c = useState(false), visible = _c[0], setVisible = _c[1];\n    var Sheet = sheetsRegistry[context] && sheetsRegistry[context][id];\n    var onShow = React.useCallback(function (data, ctx) {\n        if (ctx === void 0) { ctx = 'global'; }\n        if (ctx !== context)\n            return;\n        setPayload(data);\n        setVisible(true);\n    }, [context]);\n    var onClose = React.useCallback(function (_data, ctx) {\n        if (ctx === void 0) { ctx = 'global'; }\n        if (context !== ctx)\n            return;\n        setVisible(false);\n        setPayload(undefined);\n    }, [context]);\n    var onHide = React.useCallback(function (data, ctx) {\n        if (ctx === void 0) { ctx = 'global'; }\n        actionSheetEventManager.publish(\"hide_\".concat(id), data, ctx);\n    }, [id]);\n    useEffect(function () {\n        if (visible) {\n            actionSheetEventManager.publish(\"show_\".concat(id), payload, context);\n        }\n    }, [context, id, payload, visible]);\n    useEffect(function () {\n        var subs = [\n            actionSheetEventManager.subscribe(\"show_wrap_\".concat(id), onShow),\n            actionSheetEventManager.subscribe(\"onclose_\".concat(id), onClose),\n            actionSheetEventManager.subscribe(\"hide_wrap_\".concat(id), onHide),\n        ];\n        return function () {\n            subs.forEach(function (s) { return s.unsubscribe(); });\n        };\n    }, [id, context, onShow, onHide, onClose]);\n    if (!Sheet)\n        return null;\n    return !visible ? null : <Sheet sheetId={id} payload={payload}/>;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}