{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useState, useEffect } from 'react';\nimport { atom, useAtom } from 'jotai';\nexport var cityFruitsRenderAtom = atom(false);\nexport default function useCityFruits() {\n  var _useAtom = useAtom(cityFruitsRenderAtom),\n      _useAtom2 = _slicedToArray(_useAtom, 2),\n      rerendering = _useAtom2[0],\n      setRerendering = _useAtom2[1];\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      cities = _useState4[0],\n      setCities = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      fruits = _useState6[0],\n      setFruits = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      cityFruits = _useState8[0],\n      setCityFruits = _useState8[1];\n\n  useEffect(function () {\n    var fetchCityFruits = function () {\n      var _ref = _asyncToGenerator(function* () {\n        try {\n          var axios = require('axios');\n\n          var res = yield axios.get('http://localhost:3000/city_fruits');\n          var citiesData = res.data.map(function (item) {\n            return item.city;\n          });\n          var fruitsData = res.data.map(function (item) {\n            return item.fruits;\n          }).flat().map(function (item) {\n            return item.fruit;\n          });\n\n          var fruitsDataUnique = _toConsumableArray(new Set(fruitsData));\n\n          setCities(citiesData);\n          setFruits(fruitsDataUnique);\n          setCityFruits(res.data);\n          setLoading(false);\n        } catch (err) {\n          console.error(err);\n        }\n      });\n\n      return function fetchCityFruits() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    fetchCityFruits();\n  }, [rerendering]);\n  return {\n    cities: cities,\n    fruits: fruits,\n    cityFruits: cityFruits,\n    loading: loading\n  };\n}","map":{"version":3,"names":["useState","useEffect","atom","useAtom","cityFruitsRenderAtom","useCityFruits","rerendering","setRerendering","loading","setLoading","cities","setCities","fruits","setFruits","cityFruits","setCityFruits","fetchCityFruits","axios","require","res","get","citiesData","data","map","item","city","fruitsData","flat","fruit","fruitsDataUnique","Set","err","console","error"],"sources":["/Users/helder/repos/tests/fruitmark-mini-repo/fruitmark-app/src/hooks/useCityFruits.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { atom, useAtom } from 'jotai';\n\nexport const cityFruitsRenderAtom = atom(false);\n\nexport default function useCityFruits() {\n  const [rerendering, setRerendering] = useAtom(cityFruitsRenderAtom);\n  const [loading, setLoading] = useState(true);\n  const [cities, setCities] = useState([]);\n  const [fruits, setFruits] = useState([]);\n  const [cityFruits, setCityFruits] = useState([]);\n\n  useEffect(() => {\n    const fetchCityFruits = async () => {\n      try {\n        const axios = require('axios');\n        const res = await axios.get('http://localhost:3000/city_fruits');\n\n        const citiesData = res.data.map((item) => item.city);\n        const fruitsData = res.data\n          .map((item) => item.fruits)\n          .flat()\n          .map((item) => item.fruit);\n\n        const fruitsDataUnique = [...new Set(fruitsData)];\n\n        setCities(citiesData);\n        setFruits(fruitsDataUnique);\n        setCityFruits(res.data);\n\n        setLoading(false);\n      } catch (err) {\n        console.error(err);\n      }\n    };\n    fetchCityFruits();\n  }, [rerendering]);\n\n  return { cities, fruits, cityFruits, loading };\n}\n"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,IAAT,EAAeC,OAAf,QAA8B,OAA9B;AAEA,OAAO,IAAMC,oBAAoB,GAAGF,IAAI,CAAC,KAAD,CAAjC;AAEP,eAAe,SAASG,aAAT,GAAyB;EACtC,eAAsCF,OAAO,CAACC,oBAAD,CAA7C;EAAA;EAAA,IAAOE,WAAP;EAAA,IAAoBC,cAApB;;EACA,gBAA8BP,QAAQ,CAAC,IAAD,CAAtC;EAAA;EAAA,IAAOQ,OAAP;EAAA,IAAgBC,UAAhB;;EACA,iBAA4BT,QAAQ,CAAC,EAAD,CAApC;EAAA;EAAA,IAAOU,MAAP;EAAA,IAAeC,SAAf;;EACA,iBAA4BX,QAAQ,CAAC,EAAD,CAApC;EAAA;EAAA,IAAOY,MAAP;EAAA,IAAeC,SAAf;;EACA,iBAAoCb,QAAQ,CAAC,EAAD,CAA5C;EAAA;EAAA,IAAOc,UAAP;EAAA,IAAmBC,aAAnB;;EAEAd,SAAS,CAAC,YAAM;IACd,IAAMe,eAAe;MAAA,6BAAG,aAAY;QAClC,IAAI;UACF,IAAMC,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;UACA,IAAMC,GAAG,SAASF,KAAK,CAACG,GAAN,CAAU,mCAAV,CAAlB;UAEA,IAAMC,UAAU,GAAGF,GAAG,CAACG,IAAJ,CAASC,GAAT,CAAa,UAACC,IAAD;YAAA,OAAUA,IAAI,CAACC,IAAf;UAAA,CAAb,CAAnB;UACA,IAAMC,UAAU,GAAGP,GAAG,CAACG,IAAJ,CAChBC,GADgB,CACZ,UAACC,IAAD;YAAA,OAAUA,IAAI,CAACZ,MAAf;UAAA,CADY,EAEhBe,IAFgB,GAGhBJ,GAHgB,CAGZ,UAACC,IAAD;YAAA,OAAUA,IAAI,CAACI,KAAf;UAAA,CAHY,CAAnB;;UAKA,IAAMC,gBAAgB,sBAAO,IAAIC,GAAJ,CAAQJ,UAAR,CAAP,CAAtB;;UAEAf,SAAS,CAACU,UAAD,CAAT;UACAR,SAAS,CAACgB,gBAAD,CAAT;UACAd,aAAa,CAACI,GAAG,CAACG,IAAL,CAAb;UAEAb,UAAU,CAAC,KAAD,CAAV;QACD,CAjBD,CAiBE,OAAOsB,GAAP,EAAY;UACZC,OAAO,CAACC,KAAR,CAAcF,GAAd;QACD;MACF,CArBoB;;MAAA,gBAAff,eAAe;QAAA;MAAA;IAAA,GAArB;;IAsBAA,eAAe;EAChB,CAxBQ,EAwBN,CAACV,WAAD,CAxBM,CAAT;EA0BA,OAAO;IAAEI,MAAM,EAANA,MAAF;IAAUE,MAAM,EAANA,MAAV;IAAkBE,UAAU,EAAVA,UAAlB;IAA8BN,OAAO,EAAPA;EAA9B,CAAP;AACD"},"metadata":{},"sourceType":"module"}