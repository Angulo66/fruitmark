{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport { NativeWindStyleSheet as _NativeWindStyleSheet } from \"nativewind\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\n\nimport React, { forwardRef, useCallback, useEffect, useImperativeHandle, useRef, useState } from 'react';\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport BackHandler from \"react-native-web/dist/exports/BackHandler\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Easing from \"react-native-web/dist/exports/Easing\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport PanResponder from \"react-native-web/dist/exports/PanResponder\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { actionSheetEventManager } from \"./eventmanager\";\nimport useSheetManager from \"./hooks/use-sheet-manager\";\nimport { useKeyboard } from \"./hooks/useKeyboard\";\nimport { getZIndexFromStack, isRenderedOnTop, SheetManager } from \"./sheetmanager\";\nimport { styles } from \"./styles\";\nimport { getElevation, SUPPORTED_ORIENTATIONS } from \"./utils\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nvar CALCULATED_DEVICE_HEIGHT = 0;\nexport default forwardRef(function ActionSheet(_a, ref) {\n  var _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;\n\n  var _q = _a.animated,\n      animated = _q === void 0 ? true : _q,\n      _r = _a.closeOnPressBack,\n      closeOnPressBack = _r === void 0 ? true : _r,\n      _s = _a.springOffset,\n      springOffset = _s === void 0 ? 50 : _s,\n      _t = _a.elevation,\n      elevation = _t === void 0 ? 5 : _t,\n      _u = _a.defaultOverlayOpacity,\n      defaultOverlayOpacity = _u === void 0 ? 0.3 : _u,\n      _v = _a.overlayColor,\n      overlayColor = _v === void 0 ? 'black' : _v,\n      _w = _a.closable,\n      closable = _w === void 0 ? true : _w,\n      _x = _a.closeOnTouchBackdrop,\n      closeOnTouchBackdrop = _x === void 0 ? true : _x,\n      _y = _a.drawUnderStatusBar,\n      drawUnderStatusBar = _y === void 0 ? false : _y,\n      _z = _a.gestureEnabled,\n      gestureEnabled = _z === void 0 ? false : _z,\n      _0 = _a.isModal,\n      isModal = _0 === void 0 ? true : _0,\n      _1 = _a.snapPoints,\n      snapPoints = _1 === void 0 ? [100] : _1,\n      _2 = _a.initialSnapIndex,\n      initialSnapIndex = _2 === void 0 ? 0 : _2,\n      _3 = _a.overdrawEnabled,\n      overdrawEnabled = _3 === void 0 ? true : _3,\n      _4 = _a.overdrawFactor,\n      overdrawFactor = _4 === void 0 ? 15 : _4,\n      _5 = _a.overdrawSize,\n      overdrawSize = _5 === void 0 ? 100 : _5,\n      _6 = _a.zIndex,\n      zIndex = _6 === void 0 ? 9999 : _6,\n      _7 = _a.keyboardHandlerEnabled,\n      keyboardHandlerEnabled = _7 === void 0 ? true : _7,\n      ExtraOverlayComponent = _a.ExtraOverlayComponent,\n      props = __rest(_a, [\"animated\", \"closeOnPressBack\", \"springOffset\", \"elevation\", \"defaultOverlayOpacity\", \"overlayColor\", \"closable\", \"closeOnTouchBackdrop\", \"drawUnderStatusBar\", \"gestureEnabled\", \"isModal\", \"snapPoints\", \"initialSnapIndex\", \"overdrawEnabled\", \"overdrawFactor\", \"overdrawSize\", \"zIndex\", \"keyboardHandlerEnabled\", \"ExtraOverlayComponent\"]);\n\n  snapPoints = snapPoints[snapPoints.length - 1] !== 100 ? __spreadArray(__spreadArray([], snapPoints, true), [100], false) : snapPoints;\n  var initialValue = useRef(-1);\n  var actionSheetHeight = useRef(0);\n  var safeAreaPaddingTop = useRef();\n  var contextRef = useRef('global');\n  var currentSnapIndex = useRef(initialSnapIndex);\n  var minTranslateValue = useRef(0);\n  var keyboardWasVisible = useRef(false);\n  var prevKeyboardHeight = useRef(0);\n  var lock = useRef(false);\n  var panViewRef = useRef();\n  var gestureBoundaries = useRef({});\n\n  var _8 = useState({\n    width: Dimensions.get('window').width,\n    height: 0,\n    portrait: true,\n    paddingBottom: (props === null || props === void 0 ? void 0 : props.useBottomSafeAreaPadding) ? 25 : 0\n  }),\n      dimensions = _8[0],\n      setDimensions = _8[1];\n\n  var _9 = useSheetManager({\n    id: props.id,\n    onHide: function onHide(data) {\n      hideSheet(undefined, data);\n    },\n    onBeforeShow: props.onBeforeShow,\n    onContextUpdate: function onContextUpdate(context) {\n      if (props.id) {\n        contextRef.current = context || 'global';\n        SheetManager.add(props.id, contextRef.current);\n        SheetManager.registerRef(props.id, contextRef.current, {\n          current: getRef()\n        });\n      }\n    }\n  }),\n      visible = _9.visible,\n      setVisible = _9.setVisible;\n\n  var animations = useState({\n    opacity: new Animated.Value(0),\n    translateY: new Animated.Value(0),\n    underlayTranslateY: new Animated.Value(100)\n  })[0];\n  var keyboard = useKeyboard(keyboardHandlerEnabled, isModal, function (height) {\n    if (initialValue.current === 0 || initialValue.current - height < 0) {\n      initialValue.current = height;\n      lock.current = true;\n      animations.translateY.setValue(initialValue.current);\n      animations.underlayTranslateY.setValue(0);\n      setTimeout(function () {\n        lock.current = false;\n      }, 500);\n    }\n  }, function () {\n    if (initialValue.current === -1) {\n      return;\n    }\n\n    if (initialValue.current < prevKeyboardHeight.current + 50) {\n      initialValue.current = 0;\n      lock.current = true;\n      animations.translateY.setValue(initialValue.current);\n      setTimeout(function () {\n        lock.current = false;\n      }, 500);\n    }\n  });\n\n  var notifyOffsetChange = function notifyOffsetChange(value) {\n    actionSheetEventManager.publish('onoffsetchange', value);\n  };\n\n  var returnAnimation = React.useCallback(function (velocity) {\n    if (!animated) {\n      animations.translateY.setValue(initialValue.current);\n      return;\n    }\n\n    var config = props.openAnimationConfig;\n    var correctedValue = initialValue.current > minTranslateValue.current ? initialValue.current : 0;\n    notifyOffsetChange(correctedValue);\n    Animated.spring(animations.translateY, __assign(__assign({\n      toValue: initialValue.current,\n      useNativeDriver: true\n    }, config), {\n      velocity: velocity\n    })).start();\n  }, [animated, props.openAnimationConfig]);\n  var opacityAnimation = React.useCallback(function (opacity) {\n    Animated.timing(animations.opacity, {\n      duration: 150,\n      easing: Easing[\"in\"](Easing.ease),\n      toValue: opacity,\n      useNativeDriver: true\n    }).start();\n  }, []);\n  var hideAnimation = React.useCallback(function (vy, callback) {\n    if (!animated) {\n      callback === null || callback === void 0 ? void 0 : callback({\n        finished: true\n      });\n      return;\n    }\n\n    var config = props.closeAnimationConfig;\n    opacityAnimation(0);\n    Animated.spring(animations.translateY, __assign({\n      velocity: vy,\n      toValue: dimensions.height * 1.3,\n      useNativeDriver: true\n    }, config)).start();\n    setTimeout(function () {\n      callback === null || callback === void 0 ? void 0 : callback({\n        finished: true\n      });\n    }, 300);\n  }, [animated, dimensions.height, opacityAnimation, props.closeAnimationConfig]);\n  var getCurrentPosition = React.useCallback(function () {\n    return animations.translateY._value <= minTranslateValue.current ? 0 : animations.translateY._value;\n  }, []);\n  var getNextPosition = React.useCallback(function (snapIndex) {\n    return actionSheetHeight.current + minTranslateValue.current - actionSheetHeight.current * snapPoints[snapIndex] / 100;\n  }, [snapPoints]);\n  var hardwareBackPressEvent = useRef();\n  var Root = isModal && !(props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled) ? Modal : Animated.View;\n  useEffect(function () {\n    var listener = animations.translateY.addListener(function (value) {\n      var _a;\n\n      var correctedValue = value.value > minTranslateValue.current ? value.value : 0;\n      (_a = props === null || props === void 0 ? void 0 : props.onChange) === null || _a === void 0 ? void 0 : _a.call(props, correctedValue, actionSheetHeight.current);\n\n      if (drawUnderStatusBar) {\n        if (lock.current) return;\n        var correctedHeight = keyboard.keyboardShown ? dimensions.height - keyboard.keyboardHeight : dimensions.height;\n        var correctedOffset = keyboard.keyboardShown ? value.value - keyboard.keyboardHeight : value.value;\n\n        if (actionSheetHeight.current > correctedHeight - 1) {\n          if (correctedOffset < 100) {\n            animations.underlayTranslateY.setValue(correctedOffset);\n          } else {\n            if (animations.underlayTranslateY._value < 100) {\n              animations.underlayTranslateY.setValue(100);\n            }\n          }\n        }\n      }\n    });\n    return function () {\n      listener && animations.translateY.removeListener(listener);\n    };\n  }, [props === null || props === void 0 ? void 0 : props.id, dimensions.height, keyboard.keyboardShown, keyboard.keyboardHeight]);\n  var onDeviceLayout = React.useCallback(function (event) {\n    if (keyboard.keyboardShown && !isModal) {\n      return;\n    }\n\n    var subscription = actionSheetEventManager.subscribe('safeAreaLayout', function () {\n      subscription === null || subscription === void 0 ? void 0 : subscription.unsubscribe();\n      var safeMarginFromTop = Platform.OS === 'ios' ? safeAreaPaddingTop.current || 0 : StatusBar.currentHeight || 0;\n      var height = event.nativeEvent.layout.height - safeMarginFromTop;\n      var width = Dimensions.get('window').width;\n\n      if ((height === null || height === void 0 ? void 0 : height.toFixed(0)) === (CALCULATED_DEVICE_HEIGHT === null || CALCULATED_DEVICE_HEIGHT === void 0 ? void 0 : CALCULATED_DEVICE_HEIGHT.toFixed(0)) && (width === null || width === void 0 ? void 0 : width.toFixed(0)) === dimensions.width.toFixed(0)) {\n        return;\n      }\n\n      setDimensions({\n        width: width,\n        height: height,\n        portrait: height > width\n      });\n    });\n\n    if (safeAreaPaddingTop.current !== undefined || Platform.OS !== 'ios') {\n      actionSheetEventManager.publish('safeAreaLayout');\n    }\n  }, [dimensions.width, isModal, keyboard.keyboardShown]);\n  var hideSheet = React.useCallback(function (vy, data) {\n    if (!closable) {\n      returnAnimation(vy);\n      return;\n    }\n\n    hideAnimation(vy, function (_a) {\n      var _b, _c;\n\n      var finished = _a.finished;\n\n      if (finished) {\n        if (closable) {\n          setVisible(false);\n          (_b = props.onClose) === null || _b === void 0 ? void 0 : _b.call(props, data || props.payload || data);\n          (_c = hardwareBackPressEvent.current) === null || _c === void 0 ? void 0 : _c.remove();\n\n          if (props.id) {\n            SheetManager.remove(props.id, contextRef.current);\n            actionSheetEventManager.publish(\"onclose_\".concat(props.id), data || props.payload || data, contextRef.current);\n          }\n        } else {\n          returnAnimation();\n        }\n      }\n    });\n\n    if (Platform.OS === 'web') {\n      document.body.style.overflowY = 'auto';\n      document.documentElement.style.overflowY = 'auto';\n    }\n  }, [closable, hideAnimation, props.onClose, returnAnimation, setVisible]);\n  var onHardwareBackPress = React.useCallback(function () {\n    if (visible && closable && closeOnPressBack) {\n      hideSheet();\n      return true;\n    }\n\n    return false;\n  }, [closable, closeOnPressBack, hideSheet, visible]);\n  var snapForward = React.useCallback(function (vy) {\n    if (currentSnapIndex.current === snapPoints.length - 1) {\n      initialValue.current = getNextPosition(currentSnapIndex.current);\n      returnAnimation(vy);\n      return;\n    }\n\n    var nextSnapPoint = 0;\n    var nextSnapIndex = 0;\n\n    if (getCurrentPosition() === 0) {\n      nextSnapPoint = snapPoints[nextSnapIndex = snapPoints.length - 1];\n    } else {\n      for (var i = currentSnapIndex.current; i < snapPoints.length; i++) {\n        if (getNextPosition(i) < getCurrentPosition()) {\n          nextSnapPoint = snapPoints[nextSnapIndex = i];\n          break;\n        }\n      }\n    }\n\n    if (nextSnapPoint > 100) {\n      console.warn('Snap points should range between 0 to 100.');\n      returnAnimation(vy);\n      return;\n    }\n\n    currentSnapIndex.current = nextSnapIndex;\n    initialValue.current = getNextPosition(currentSnapIndex.current);\n    returnAnimation(vy);\n  }, [getCurrentPosition, getNextPosition, returnAnimation, snapPoints]);\n  var snapBackward = React.useCallback(function (vy) {\n    if (currentSnapIndex.current === 0) {\n      if (closable) {\n        initialValue.current = dimensions.height * 1.3;\n        hideSheet(vy);\n      } else {\n        initialValue.current = getNextPosition(currentSnapIndex.current);\n        returnAnimation(vy);\n      }\n\n      return;\n    }\n\n    var nextSnapPoint = 0;\n    var nextSnapIndex = 0;\n\n    for (var i = currentSnapIndex.current; i > -1; i--) {\n      if (getNextPosition(i) > getCurrentPosition()) {\n        nextSnapPoint = snapPoints[nextSnapIndex = i];\n        break;\n      }\n    }\n\n    if (nextSnapPoint < 0) {\n      console.warn('Snap points should range between 0 to 100.');\n      returnAnimation(vy);\n      return;\n    }\n\n    currentSnapIndex.current = nextSnapIndex;\n    initialValue.current = getNextPosition(currentSnapIndex.current);\n    returnAnimation(vy);\n  }, [closable, dimensions.height, getCurrentPosition, getNextPosition, hideSheet, returnAnimation, snapPoints]);\n  var handlers = React.useMemo(function () {\n    return !gestureEnabled ? {\n      panHandlers: {}\n    } : PanResponder.create({\n      onMoveShouldSetPanResponder: function onMoveShouldSetPanResponder(event, gesture) {\n        if (props.id && !isRenderedOnTop(props.id, contextRef.current)) return false;\n        var vy = gesture.vy < 0 ? gesture.vy * -1 : gesture.vy;\n        var vx = gesture.vx < 0 ? gesture.vx * -1 : gesture.vx;\n\n        if (vy < 0.05 || vx > 0.05) {\n          return false;\n        }\n\n        var gestures = true;\n\n        for (var id in gestureBoundaries.current) {\n          var gestureBoundary = gestureBoundaries.current[id];\n\n          if (getCurrentPosition() > 0 || !gestureBoundary) {\n            gestures = true;\n            break;\n          }\n\n          var scrollOffset = (gestureBoundary === null || gestureBoundary === void 0 ? void 0 : gestureBoundary.scrollOffset) || 0;\n\n          if (event.nativeEvent.pageY < (gestureBoundary === null || gestureBoundary === void 0 ? void 0 : gestureBoundary.y) || gesture.vy > 0 && scrollOffset <= 0 || getCurrentPosition() !== 0) {\n            gestures = true;\n          } else {\n            gestures = false;\n            break;\n          }\n        }\n\n        if (Platform.OS === 'web') {\n          if (!gestures) {\n            panViewRef.current.style.touchAction = 'none';\n          } else {\n            panViewRef.current.style.touchAction = 'auto';\n          }\n        }\n\n        return gestures;\n      },\n      onStartShouldSetPanResponder: function onStartShouldSetPanResponder(event, _gesture) {\n        if (props.id && !isRenderedOnTop(props.id, contextRef.current)) return false;\n\n        if (Platform.OS === 'web') {\n          var gestures = true;\n\n          for (var id in gestureBoundaries.current) {\n            var gestureBoundary = gestureBoundaries.current[id];\n\n            if (getCurrentPosition() > 3 || !gestureBoundary) {\n              gestures = true;\n            }\n\n            var scrollOffset = (gestureBoundary === null || gestureBoundary === void 0 ? void 0 : gestureBoundary.scrollOffset) || 0;\n\n            if (event.nativeEvent.pageY < (gestureBoundary === null || gestureBoundary === void 0 ? void 0 : gestureBoundary.y) || scrollOffset <= 0 || getCurrentPosition() !== 0) {\n              gestures = true;\n            } else {\n              gestures = false;\n            }\n          }\n\n          return gestures;\n        }\n\n        return true;\n      },\n      onPanResponderMove: function onPanResponderMove(_event, gesture) {\n        var value = initialValue.current + gesture.dy;\n        var correctedValue = value <= minTranslateValue.current ? minTranslateValue.current - value : value;\n\n        if (correctedValue / overdrawFactor >= overdrawSize && gesture.dy <= 0) {\n          return;\n        }\n\n        animations.translateY.setValue(value <= minTranslateValue.current ? overdrawEnabled ? minTranslateValue.current - correctedValue / overdrawFactor : minTranslateValue.current : value);\n      },\n      onPanResponderEnd: function onPanResponderEnd(_event, gesture) {\n        var isMovingUp = getCurrentPosition() < initialValue.current;\n\n        if (!isMovingUp && getCurrentPosition() < initialValue.current + springOffset || isMovingUp && getCurrentPosition() > initialValue.current - springOffset) {\n          returnAnimation(gesture.vy);\n          return;\n        }\n\n        if (!isMovingUp) {\n          snapBackward(gesture.vy);\n        } else {\n          snapForward(gesture.vy);\n        }\n      }\n    });\n  }, [gestureEnabled, props.id, getCurrentPosition, overdrawFactor, overdrawSize, animations.translateY, overdrawEnabled, springOffset, returnAnimation, snapBackward, snapForward]);\n\n  var onTouch = function onTouch() {\n    if (closeOnTouchBackdrop && closable) {\n      hideSheet();\n    }\n  };\n\n  var onSheetLayout = React.useCallback(function (event) {\n    actionSheetHeight.current = event.nativeEvent.layout.height;\n    minTranslateValue.current = dimensions.height - actionSheetHeight.current;\n\n    if (initialValue.current < 0) {\n      animations.translateY.setValue(dimensions.height * 1.1);\n    }\n\n    var nextInitialValue = actionSheetHeight.current + minTranslateValue.current - actionSheetHeight.current * snapPoints[currentSnapIndex.current] / 100;\n    initialValue.current = (keyboard.keyboardShown || keyboardWasVisible.current) && initialValue.current <= nextInitialValue && initialValue.current >= minTranslateValue.current ? initialValue.current : nextInitialValue;\n\n    if (keyboard.keyboardShown) {\n      keyboardWasVisible.current = true;\n      prevKeyboardHeight.current = keyboard.keyboardHeight;\n    } else {\n      keyboardWasVisible.current = false;\n    }\n\n    opacityAnimation(1);\n    returnAnimation();\n\n    if (initialValue.current > 100) {\n      if (lock.current) return;\n      animations.underlayTranslateY.setValue(100);\n    }\n\n    if (Platform.OS === 'web') {\n      document.body.style.overflowY = 'hidden';\n      document.documentElement.style.overflowY = 'hidden';\n    }\n  }, [animations.translateY, animations.underlayTranslateY, opacityAnimation, returnAnimation, snapPoints, dimensions.height, keyboard.keyboardShown, keyboard.keyboardHeight]);\n  var getRef = useCallback(function () {\n    return {\n      show: function show() {\n        setTimeout(function () {\n          setVisible(true);\n        }, 1);\n      },\n      hide: function hide(data) {\n        hideSheet(data);\n      },\n      setModalVisible: function setModalVisible(_visible) {\n        if (_visible) {\n          setTimeout(function () {\n            setVisible(true);\n          }, 1);\n        } else {\n          hideSheet();\n        }\n      },\n      snapToOffset: function snapToOffset(offset) {\n        initialValue.current = actionSheetHeight.current + minTranslateValue.current - actionSheetHeight.current * offset / 100;\n        Animated.spring(animations.translateY, __assign({\n          toValue: initialValue.current,\n          useNativeDriver: true\n        }, props.openAnimationConfig)).start();\n      },\n      snapToIndex: function snapToIndex(index) {\n        if (index > snapPoints.length || index < 0) return;\n        currentSnapIndex.current = index;\n        initialValue.current = getNextPosition(index);\n        Animated.spring(animations.translateY, __assign({\n          toValue: initialValue.current,\n          useNativeDriver: true\n        }, props.openAnimationConfig)).start();\n      },\n      handleChildScrollEnd: function handleChildScrollEnd() {\n        console.warn('handleChildScrollEnd has been removed. Please use `useScrollHandlers` hook to enable scrolling in ActionSheet');\n      },\n      modifyGesturesForLayout: function modifyGesturesForLayout(id, layout, scrollOffset) {\n        gestureBoundaries.current[id] = __assign(__assign({}, layout), {\n          scrollOffset: scrollOffset\n        });\n      },\n      isGestureEnabled: function isGestureEnabled() {\n        return gestureEnabled;\n      },\n      isOpen: function isOpen() {\n        return visible;\n      }\n    };\n  }, [animations.translateY, gestureEnabled, getNextPosition, hideSheet, props.openAnimationConfig, setVisible, snapPoints.length, visible]);\n  useImperativeHandle(ref, getRef, [getRef]);\n  useEffect(function () {\n    if (props.id) {\n      SheetManager.registerRef(props.id, contextRef.current, {\n        current: getRef()\n      });\n    }\n  }, [getRef, props.id]);\n  var onRequestClose = React.useCallback(function () {\n    hideSheet();\n  }, [hideSheet]);\n  var rootProps = React.useMemo(function () {\n    var _a, _b;\n\n    return isModal && !props.backgroundInteractionEnabled ? {\n      visible: true,\n      animationType: 'none',\n      testID: ((_a = props.testIDs) === null || _a === void 0 ? void 0 : _a.modal) || props.testID,\n      supportedOrientations: SUPPORTED_ORIENTATIONS,\n      onShow: props.onOpen,\n      onRequestClose: onRequestClose,\n      transparent: true,\n      statusBarTranslucent: true\n    } : {\n      testID: ((_b = props.testIDs) === null || _b === void 0 ? void 0 : _b.root) || props.testID,\n      onLayout: function onLayout() {\n        var _a;\n\n        hardwareBackPressEvent.current = BackHandler.addEventListener('hardwareBackPress', onHardwareBackPress);\n        (_a = props === null || props === void 0 ? void 0 : props.onOpen) === null || _a === void 0 ? void 0 : _a.call(props);\n      },\n      style: {\n        position: 'absolute',\n        zIndex: zIndex ? zIndex : props.id ? getZIndexFromStack(props.id, contextRef.current) : 999,\n        width: '100%',\n        height: '100%'\n      },\n      pointerEvents: (props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled) ? 'box-none' : 'auto'\n    };\n  }, [isModal, onHardwareBackPress, onRequestClose, props, zIndex]);\n\n  var getPaddingBottom = function getPaddingBottom() {\n    var _a, _b, _c, _d, _e;\n\n    var topPadding = Platform.OS === 'android' ? StatusBar.currentHeight && StatusBar.currentHeight > 35 ? 35 : StatusBar.currentHeight : (safeAreaPaddingTop.current || 0) > 30 ? 30 : safeAreaPaddingTop.current;\n\n    if (!props.useBottomSafeAreaPadding && props.containerStyle) {\n      return ((_a = props.containerStyle) === null || _a === void 0 ? void 0 : _a.paddingBottom) || props.containerStyle.padding;\n    }\n\n    if (!props.containerStyle && (props === null || props === void 0 ? void 0 : props.useBottomSafeAreaPadding)) {\n      return topPadding;\n    }\n\n    if (((_b = props.containerStyle) === null || _b === void 0 ? void 0 : _b.paddingBottom) === 'string') return props.containerStyle.paddingBottom;\n    if (((_c = props.containerStyle) === null || _c === void 0 ? void 0 : _c.padding) === 'string') return props.containerStyle.padding;\n\n    if ((_d = props.containerStyle) === null || _d === void 0 ? void 0 : _d.paddingBottom) {\n      return topPadding + props.containerStyle.paddingBottom;\n    }\n\n    if ((_e = props.containerStyle) === null || _e === void 0 ? void 0 : _e.padding) {\n      return topPadding + props.containerStyle.padding;\n    }\n\n    return topPadding;\n  };\n\n  var paddingBottom = getPaddingBottom();\n  return _jsxs(_Fragment, {\n    children: [Platform.OS === 'ios' ? _jsx(SafeAreaView, {\n      pointerEvents: \"none\",\n      collapsable: false,\n      onLayout: function onLayout(event) {\n        var height = event.nativeEvent.layout.height;\n\n        if (height !== undefined) {\n          actionSheetEventManager.publish('safeAreaLayout');\n          safeAreaPaddingTop.current = event.nativeEvent.layout.height;\n        }\n      },\n      style: {\n        position: 'absolute',\n        width: 1,\n        left: 0,\n        top: 0,\n        backgroundColor: 'transparent'\n      },\n      children: _jsx(View, {})\n    }) : null, visible ? _jsx(Root, _objectSpread(_objectSpread({}, rootProps), {}, {\n      children: _jsxs(Animated.View, {\n        onLayout: onDeviceLayout,\n        pointerEvents: (props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled) ? 'box-none' : 'auto',\n        style: [styles.parentContainer, {\n          opacity: animations.opacity,\n          width: '100%',\n          justifyContent: 'flex-end',\n          paddingBottom: (isModal || Platform.OS === 'ios') && keyboard.keyboardShown ? keyboard.keyboardHeight : 0\n        }],\n        children: [props.withNestedSheetProvider, ExtraOverlayComponent, !(props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled) ? _jsx(TouchableOpacity, {\n          onPress: onTouch,\n          activeOpacity: defaultOverlayOpacity,\n          testID: (_b = props.testIDs) === null || _b === void 0 ? void 0 : _b.backdrop,\n          style: {\n            height: Dimensions.get('window').height + 100 || dimensions.height + (safeAreaPaddingTop.current || 0) + 100,\n            width: '100%',\n            position: 'absolute',\n            zIndex: 2,\n            backgroundColor: overlayColor,\n            opacity: defaultOverlayOpacity\n          }\n        }) : null, _jsxs(Animated.View, {\n          pointerEvents: \"box-none\",\n          style: __assign(__assign({\n            borderTopRightRadius: ((_c = props.containerStyle) === null || _c === void 0 ? void 0 : _c.borderTopRightRadius) || 10,\n            borderTopLeftRadius: ((_d = props.containerStyle) === null || _d === void 0 ? void 0 : _d.borderTopLeftRadius) || 10,\n            backgroundColor: ((_e = props.containerStyle) === null || _e === void 0 ? void 0 : _e.backgroundColor) || 'white',\n            borderBottomLeftRadius: ((_f = props.containerStyle) === null || _f === void 0 ? void 0 : _f.borderBottomLeftRadius) || undefined,\n            borderBottomRightRadius: ((_g = props.containerStyle) === null || _g === void 0 ? void 0 : _g.borderBottomRightRadius) || undefined,\n            borderRadius: ((_h = props.containerStyle) === null || _h === void 0 ? void 0 : _h.borderRadius) || undefined,\n            width: ((_j = props.containerStyle) === null || _j === void 0 ? void 0 : _j.width) || '100%'\n          }, getElevation(typeof elevation === 'number' ? elevation : 5)), {\n            flex: undefined,\n            height: dimensions.height,\n            maxHeight: (isModal || Platform.OS === 'ios') && keyboard.keyboardShown ? dimensions.height - keyboard.keyboardHeight : dimensions.height,\n            marginBottom: (isModal || Platform.OS === 'ios') && keyboard.keyboardShown ? keyboard.keyboardHeight : 0,\n            zIndex: 10,\n            transform: [{\n              translateY: animations.translateY\n            }]\n          }),\n          children: [dimensions.height === 0 ? null : _jsxs(Animated.View, _objectSpread(_objectSpread({}, handlers.panHandlers), {}, {\n            onLayout: onSheetLayout,\n            ref: panViewRef,\n            testID: (_k = props.testIDs) === null || _k === void 0 ? void 0 : _k.sheet,\n            style: [styles.container, {\n              borderTopRightRadius: 10,\n              borderTopLeftRadius: 10\n            }, props.containerStyle, {\n              paddingBottom: paddingBottom,\n              maxHeight: keyboard.keyboardShown ? dimensions.height - keyboard.keyboardHeight : dimensions.height\n            }],\n            children: [drawUnderStatusBar ? _jsx(Animated.View, {\n              style: {\n                height: 100,\n                position: 'absolute',\n                top: -50,\n                backgroundColor: ((_l = props.containerStyle) === null || _l === void 0 ? void 0 : _l.backgroundColor) || 'white',\n                width: '100%',\n                borderRadius: ((_m = props.containerStyle) === null || _m === void 0 ? void 0 : _m.borderRadius) || 10,\n                transform: [{\n                  translateY: animations.underlayTranslateY\n                }]\n              }\n            }) : null, gestureEnabled || props.headerAlwaysVisible ? props.CustomHeaderComponent ? props.CustomHeaderComponent : _jsx(Animated.View, {\n              style: [styles.indicator, props.indicatorStyle]\n            }) : null, props === null || props === void 0 ? void 0 : props.children]\n          })), overdrawEnabled ? _jsx(Animated.View, {\n            style: {\n              position: 'absolute',\n              height: overdrawSize,\n              bottom: -overdrawSize,\n              backgroundColor: ((_o = props.containerStyle) === null || _o === void 0 ? void 0 : _o.backgroundColor) || 'white',\n              width: ((_p = props.containerStyle) === null || _p === void 0 ? void 0 : _p.width) || dimensions.width\n            }\n          }) : null]\n        })]\n      })\n    })) : null]\n  });\n});\n\n_NativeWindStyleSheet.create({\n  styles: {\n    \"container\": {\n      \"width\": \"100%\"\n    },\n    \"container@0\": {\n      \"maxWidth\": 640\n    },\n    \"container@1\": {\n      \"maxWidth\": 768\n    },\n    \"container@2\": {\n      \"maxWidth\": 1024\n    },\n    \"container@3\": {\n      \"maxWidth\": 1280\n    },\n    \"container@4\": {\n      \"maxWidth\": 1536\n    },\n    \"absolute\": {\n      \"position\": \"absolute\"\n    },\n    \"flex\": {\n      \"display\": \"flex\"\n    },\n    \"hidden\": {\n      \"display\": \"none\"\n    },\n    \"elevation\": {\n      \"elevation\": 3\n    }\n  },\n  atRules: {\n    \"container\": [[[\"media\", \"(min-width: 640px)\"]], [[\"media\", \"(min-width: 768px)\"]], [[\"media\", \"(min-width: 1024px)\"]], [[\"media\", \"(min-width: 1280px)\"]], [[\"media\", \"(min-width: 1536px)\"]]]\n  },\n  topics: {\n    \"container\": [\"width\"]\n  }\n});","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__spreadArray","to","from","pack","l","ar","Array","slice","concat","React","forwardRef","useCallback","useEffect","useImperativeHandle","useRef","useState","actionSheetEventManager","useSheetManager","useKeyboard","getZIndexFromStack","isRenderedOnTop","SheetManager","styles","getElevation","SUPPORTED_ORIENTATIONS","CALCULATED_DEVICE_HEIGHT","ActionSheet","_a","ref","_b","_c","_d","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","_q","animated","_r","closeOnPressBack","_s","springOffset","_t","elevation","_u","defaultOverlayOpacity","_v","overlayColor","_w","closable","_x","closeOnTouchBackdrop","_y","drawUnderStatusBar","_z","gestureEnabled","_0","isModal","_1","snapPoints","_2","initialSnapIndex","_3","overdrawEnabled","_4","overdrawFactor","_5","overdrawSize","_6","zIndex","_7","keyboardHandlerEnabled","ExtraOverlayComponent","props","initialValue","actionSheetHeight","safeAreaPaddingTop","contextRef","currentSnapIndex","minTranslateValue","keyboardWasVisible","prevKeyboardHeight","lock","panViewRef","gestureBoundaries","_8","width","Dimensions","get","height","portrait","paddingBottom","useBottomSafeAreaPadding","dimensions","setDimensions","_9","id","onHide","data","hideSheet","undefined","onBeforeShow","onContextUpdate","context","current","add","registerRef","getRef","visible","setVisible","animations","opacity","Animated","Value","translateY","underlayTranslateY","keyboard","setValue","setTimeout","notifyOffsetChange","value","publish","returnAnimation","velocity","config","openAnimationConfig","correctedValue","spring","toValue","useNativeDriver","start","opacityAnimation","timing","duration","easing","Easing","ease","hideAnimation","vy","callback","finished","closeAnimationConfig","getCurrentPosition","_value","getNextPosition","snapIndex","hardwareBackPressEvent","Root","backgroundInteractionEnabled","Modal","View","listener","addListener","onChange","correctedHeight","keyboardShown","keyboardHeight","correctedOffset","removeListener","onDeviceLayout","event","subscription","subscribe","unsubscribe","safeMarginFromTop","Platform","OS","StatusBar","currentHeight","nativeEvent","layout","toFixed","onClose","payload","remove","document","body","style","overflowY","documentElement","onHardwareBackPress","snapForward","nextSnapPoint","nextSnapIndex","console","warn","snapBackward","handlers","useMemo","panHandlers","PanResponder","create","onMoveShouldSetPanResponder","gesture","vx","gestures","gestureBoundary","scrollOffset","pageY","y","touchAction","onStartShouldSetPanResponder","_gesture","onPanResponderMove","_event","dy","onPanResponderEnd","isMovingUp","onTouch","onSheetLayout","nextInitialValue","show","hide","setModalVisible","_visible","snapToOffset","offset","snapToIndex","index","handleChildScrollEnd","modifyGesturesForLayout","isGestureEnabled","isOpen","onRequestClose","rootProps","animationType","testID","testIDs","modal","supportedOrientations","onShow","onOpen","transparent","statusBarTranslucent","root","onLayout","BackHandler","addEventListener","position","pointerEvents","getPaddingBottom","topPadding","containerStyle","padding","left","top","backgroundColor","parentContainer","justifyContent","withNestedSheetProvider","backdrop","borderTopRightRadius","borderTopLeftRadius","borderBottomLeftRadius","borderBottomRightRadius","borderRadius","flex","maxHeight","marginBottom","transform","sheet","container","headerAlwaysVisible","CustomHeaderComponent","indicator","indicatorStyle","children","bottom"],"sources":["/Users/helder/repos/tests/fruitmark-mini-repo/fruitmark-app/node_modules/react-native-actions-sheet/dist/src/index.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\n/* eslint-disable curly */\nimport React, { forwardRef, useCallback, useEffect, useImperativeHandle, useRef, useState, } from 'react';\nimport { Animated, BackHandler, Dimensions, Easing, Modal, PanResponder, Platform, SafeAreaView, StatusBar, TouchableOpacity, View, } from 'react-native';\nimport { actionSheetEventManager } from './eventmanager';\nimport useSheetManager from './hooks/use-sheet-manager';\nimport { useKeyboard } from './hooks/useKeyboard';\nimport { getZIndexFromStack, isRenderedOnTop, SheetManager, } from './sheetmanager';\nimport { styles } from './styles';\nimport { getElevation, SUPPORTED_ORIENTATIONS } from './utils';\nvar CALCULATED_DEVICE_HEIGHT = 0;\nexport default forwardRef(function ActionSheet(_a, ref) {\n    var _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;\n    var _q = _a.animated, animated = _q === void 0 ? true : _q, _r = _a.closeOnPressBack, closeOnPressBack = _r === void 0 ? true : _r, _s = _a.springOffset, springOffset = _s === void 0 ? 50 : _s, _t = _a.elevation, elevation = _t === void 0 ? 5 : _t, _u = _a.defaultOverlayOpacity, defaultOverlayOpacity = _u === void 0 ? 0.3 : _u, _v = _a.overlayColor, overlayColor = _v === void 0 ? 'black' : _v, _w = _a.closable, closable = _w === void 0 ? true : _w, _x = _a.closeOnTouchBackdrop, closeOnTouchBackdrop = _x === void 0 ? true : _x, _y = _a.drawUnderStatusBar, drawUnderStatusBar = _y === void 0 ? false : _y, _z = _a.gestureEnabled, gestureEnabled = _z === void 0 ? false : _z, _0 = _a.isModal, isModal = _0 === void 0 ? true : _0, _1 = _a.snapPoints, snapPoints = _1 === void 0 ? [100] : _1, _2 = _a.initialSnapIndex, initialSnapIndex = _2 === void 0 ? 0 : _2, _3 = _a.overdrawEnabled, overdrawEnabled = _3 === void 0 ? true : _3, _4 = _a.overdrawFactor, overdrawFactor = _4 === void 0 ? 15 : _4, _5 = _a.overdrawSize, overdrawSize = _5 === void 0 ? 100 : _5, _6 = _a.zIndex, zIndex = _6 === void 0 ? 9999 : _6, _7 = _a.keyboardHandlerEnabled, keyboardHandlerEnabled = _7 === void 0 ? true : _7, ExtraOverlayComponent = _a.ExtraOverlayComponent, props = __rest(_a, [\"animated\", \"closeOnPressBack\", \"springOffset\", \"elevation\", \"defaultOverlayOpacity\", \"overlayColor\", \"closable\", \"closeOnTouchBackdrop\", \"drawUnderStatusBar\", \"gestureEnabled\", \"isModal\", \"snapPoints\", \"initialSnapIndex\", \"overdrawEnabled\", \"overdrawFactor\", \"overdrawSize\", \"zIndex\", \"keyboardHandlerEnabled\", \"ExtraOverlayComponent\"]);\n    snapPoints =\n        snapPoints[snapPoints.length - 1] !== 100\n            ? __spreadArray(__spreadArray([], snapPoints, true), [100], false) : snapPoints;\n    var initialValue = useRef(-1);\n    var actionSheetHeight = useRef(0);\n    var safeAreaPaddingTop = useRef();\n    var contextRef = useRef('global');\n    var currentSnapIndex = useRef(initialSnapIndex);\n    var minTranslateValue = useRef(0);\n    var keyboardWasVisible = useRef(false);\n    var prevKeyboardHeight = useRef(0);\n    var lock = useRef(false);\n    var panViewRef = useRef();\n    var gestureBoundaries = useRef({});\n    var _8 = useState({\n        width: Dimensions.get('window').width,\n        height: 0,\n        portrait: true,\n        paddingBottom: (props === null || props === void 0 ? void 0 : props.useBottomSafeAreaPadding) ? 25 : 0\n    }), dimensions = _8[0], setDimensions = _8[1];\n    var _9 = useSheetManager({\n        id: props.id,\n        onHide: function (data) {\n            hideSheet(undefined, data);\n        },\n        onBeforeShow: props.onBeforeShow,\n        onContextUpdate: function (context) {\n            if (props.id) {\n                contextRef.current = context || 'global';\n                SheetManager.add(props.id, contextRef.current);\n                SheetManager.registerRef(props.id, contextRef.current, {\n                    current: getRef()\n                });\n            }\n        }\n    }), visible = _9.visible, setVisible = _9.setVisible;\n    var animations = useState({\n        opacity: new Animated.Value(0),\n        translateY: new Animated.Value(0),\n        underlayTranslateY: new Animated.Value(100)\n    })[0];\n    var keyboard = useKeyboard(keyboardHandlerEnabled, isModal, function (height) {\n        // Calculate next position and move the sheet before\n        // next state update to ensure there is no flickering.\n        // Yeah, this is a hack but it works. Keyboard is painful in\n        // action sheets.\n        if (initialValue.current === 0 || initialValue.current - height < 0) {\n            initialValue.current = height;\n            lock.current = true;\n            animations.translateY.setValue(initialValue.current);\n            animations.underlayTranslateY.setValue(0);\n            setTimeout(function () {\n                lock.current = false;\n            }, 500);\n        }\n    }, function () {\n        // Don't run `hideKeyboard` callback if the `showKeyboard` hasn't ran yet.\n        // Fix a race condition when you open a action sheet while you have the keyboard opened.\n        if (initialValue.current === -1) {\n            return;\n        }\n        if (initialValue.current < prevKeyboardHeight.current + 50) {\n            initialValue.current = 0;\n            lock.current = true;\n            animations.translateY.setValue(initialValue.current);\n            setTimeout(function () {\n                lock.current = false;\n            }, 500);\n        }\n    });\n    var notifyOffsetChange = function (value) {\n        actionSheetEventManager.publish('onoffsetchange', value);\n    };\n    var returnAnimation = React.useCallback(function (velocity) {\n        if (!animated) {\n            animations.translateY.setValue(initialValue.current);\n            return;\n        }\n        var config = props.openAnimationConfig;\n        var correctedValue = initialValue.current > minTranslateValue.current\n            ? initialValue.current\n            : 0;\n        notifyOffsetChange(correctedValue);\n        Animated.spring(animations.translateY, __assign(__assign({ toValue: initialValue.current, useNativeDriver: true }, config), { velocity: velocity })).start();\n    }, \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [animated, props.openAnimationConfig]);\n    var opacityAnimation = React.useCallback(function (opacity) {\n        Animated.timing(animations.opacity, {\n            duration: 150,\n            easing: Easing[\"in\"](Easing.ease),\n            toValue: opacity,\n            useNativeDriver: true\n        }).start();\n    }, \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []);\n    var hideAnimation = React.useCallback(function (vy, callback) {\n        if (!animated) {\n            callback === null || callback === void 0 ? void 0 : callback({ finished: true });\n            return;\n        }\n        var config = props.closeAnimationConfig;\n        opacityAnimation(0);\n        Animated.spring(animations.translateY, __assign({ velocity: vy, toValue: dimensions.height * 1.3, useNativeDriver: true }, config)).start();\n        setTimeout(function () {\n            callback === null || callback === void 0 ? void 0 : callback({ finished: true });\n        }, 300);\n    }, \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n        animated,\n        dimensions.height,\n        opacityAnimation,\n        props.closeAnimationConfig,\n    ]);\n    var getCurrentPosition = React.useCallback(function () {\n        //@ts-ignore\n        return animations.translateY._value <= minTranslateValue.current\n            ? 0\n            : //@ts-ignore\n                animations.translateY._value;\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    var getNextPosition = React.useCallback(function (snapIndex) {\n        return (actionSheetHeight.current +\n            minTranslateValue.current -\n            (actionSheetHeight.current * snapPoints[snapIndex]) / 100);\n    }, [snapPoints]);\n    var hardwareBackPressEvent = useRef();\n    var Root = isModal && !(props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled) ? Modal : Animated.View;\n    useEffect(function () {\n        var listener = animations.translateY.addListener(function (value) {\n            var _a;\n            var correctedValue = value.value > minTranslateValue.current ? value.value : 0;\n            (_a = props === null || props === void 0 ? void 0 : props.onChange) === null || _a === void 0 ? void 0 : _a.call(props, correctedValue, actionSheetHeight.current);\n            if (drawUnderStatusBar) {\n                if (lock.current)\n                    return;\n                var correctedHeight = keyboard.keyboardShown\n                    ? dimensions.height - keyboard.keyboardHeight\n                    : dimensions.height;\n                var correctedOffset = keyboard.keyboardShown\n                    ? value.value - keyboard.keyboardHeight\n                    : value.value;\n                if (actionSheetHeight.current > correctedHeight - 1) {\n                    if (correctedOffset < 100) {\n                        animations.underlayTranslateY.setValue(correctedOffset);\n                    }\n                    else {\n                        //@ts-ignore\n                        if (animations.underlayTranslateY._value < 100) {\n                            animations.underlayTranslateY.setValue(100);\n                        }\n                    }\n                }\n            }\n        });\n        return function () {\n            listener && animations.translateY.removeListener(listener);\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [\n        props === null || props === void 0 ? void 0 : props.id,\n        dimensions.height,\n        keyboard.keyboardShown,\n        keyboard.keyboardHeight,\n    ]);\n    var onDeviceLayout = React.useCallback(function (event) {\n        if (keyboard.keyboardShown && !isModal) {\n            return;\n        }\n        var subscription = actionSheetEventManager.subscribe('safeAreaLayout', function () {\n            subscription === null || subscription === void 0 ? void 0 : subscription.unsubscribe();\n            var safeMarginFromTop = Platform.OS === 'ios'\n                ? safeAreaPaddingTop.current || 0\n                : StatusBar.currentHeight || 0;\n            var height = event.nativeEvent.layout.height - safeMarginFromTop;\n            var width = Dimensions.get('window').width;\n            if ((height === null || height === void 0 ? void 0 : height.toFixed(0)) === (CALCULATED_DEVICE_HEIGHT === null || CALCULATED_DEVICE_HEIGHT === void 0 ? void 0 : CALCULATED_DEVICE_HEIGHT.toFixed(0)) &&\n                (width === null || width === void 0 ? void 0 : width.toFixed(0)) === dimensions.width.toFixed(0)) {\n                return;\n            }\n            setDimensions({\n                width: width,\n                height: height,\n                portrait: height > width\n            });\n        });\n        if (safeAreaPaddingTop.current !== undefined || Platform.OS !== 'ios') {\n            actionSheetEventManager.publish('safeAreaLayout');\n        }\n    }, [dimensions.width, isModal, keyboard.keyboardShown]);\n    var hideSheet = React.useCallback(function (vy, data) {\n        if (!closable) {\n            returnAnimation(vy);\n            return;\n        }\n        hideAnimation(vy, function (_a) {\n            var _b, _c;\n            var finished = _a.finished;\n            if (finished) {\n                if (closable) {\n                    setVisible(false);\n                    (_b = props.onClose) === null || _b === void 0 ? void 0 : _b.call(props, data || props.payload || data);\n                    (_c = hardwareBackPressEvent.current) === null || _c === void 0 ? void 0 : _c.remove();\n                    if (props.id) {\n                        SheetManager.remove(props.id, contextRef.current);\n                        actionSheetEventManager.publish(\"onclose_\".concat(props.id), data || props.payload || data, contextRef.current);\n                    }\n                }\n                else {\n                    returnAnimation();\n                }\n            }\n        });\n        if (Platform.OS === 'web') {\n            document.body.style.overflowY = 'auto';\n            document.documentElement.style.overflowY = 'auto';\n        }\n    }, \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [closable, hideAnimation, props.onClose, returnAnimation, setVisible]);\n    var onHardwareBackPress = React.useCallback(function () {\n        if (visible && closable && closeOnPressBack) {\n            hideSheet();\n            return true;\n        }\n        return false;\n    }, [closable, closeOnPressBack, hideSheet, visible]);\n    /**\n     * Snap towards the top\n     */\n    var snapForward = React.useCallback(function (vy) {\n        if (currentSnapIndex.current === snapPoints.length - 1) {\n            initialValue.current = getNextPosition(currentSnapIndex.current);\n            returnAnimation(vy);\n            return;\n        }\n        var nextSnapPoint = 0;\n        var nextSnapIndex = 0;\n        if (getCurrentPosition() === 0) {\n            nextSnapPoint = snapPoints[(nextSnapIndex = snapPoints.length - 1)];\n        }\n        else {\n            for (var i = currentSnapIndex.current; i < snapPoints.length; i++) {\n                if (getNextPosition(i) < getCurrentPosition()) {\n                    nextSnapPoint = snapPoints[(nextSnapIndex = i)];\n                    break;\n                }\n            }\n        }\n        if (nextSnapPoint > 100) {\n            console.warn('Snap points should range between 0 to 100.');\n            returnAnimation(vy);\n            return;\n        }\n        currentSnapIndex.current = nextSnapIndex;\n        initialValue.current = getNextPosition(currentSnapIndex.current);\n        returnAnimation(vy);\n    }, [getCurrentPosition, getNextPosition, returnAnimation, snapPoints]);\n    /**\n     * Snap towards the bottom\n     */\n    var snapBackward = React.useCallback(function (vy) {\n        if (currentSnapIndex.current === 0) {\n            if (closable) {\n                initialValue.current = dimensions.height * 1.3;\n                hideSheet(vy);\n            }\n            else {\n                initialValue.current = getNextPosition(currentSnapIndex.current);\n                returnAnimation(vy);\n            }\n            return;\n        }\n        var nextSnapPoint = 0;\n        var nextSnapIndex = 0;\n        for (var i = currentSnapIndex.current; i > -1; i--) {\n            if (getNextPosition(i) > getCurrentPosition()) {\n                nextSnapPoint = snapPoints[(nextSnapIndex = i)];\n                break;\n            }\n        }\n        if (nextSnapPoint < 0) {\n            console.warn('Snap points should range between 0 to 100.');\n            returnAnimation(vy);\n            return;\n        }\n        currentSnapIndex.current = nextSnapIndex;\n        initialValue.current = getNextPosition(currentSnapIndex.current);\n        returnAnimation(vy);\n    }, [\n        closable,\n        dimensions.height,\n        getCurrentPosition,\n        getNextPosition,\n        hideSheet,\n        returnAnimation,\n        snapPoints,\n    ]);\n    var handlers = React.useMemo(function () {\n        return !gestureEnabled\n            ? { panHandlers: {} }\n            : PanResponder.create({\n                onMoveShouldSetPanResponder: function (event, gesture) {\n                    if (props.id && !isRenderedOnTop(props.id, contextRef.current))\n                        return false;\n                    var vy = gesture.vy < 0 ? gesture.vy * -1 : gesture.vy;\n                    var vx = gesture.vx < 0 ? gesture.vx * -1 : gesture.vx;\n                    if (vy < 0.05 || vx > 0.05) {\n                        return false;\n                    }\n                    var gestures = true;\n                    for (var id in gestureBoundaries.current) {\n                        var gestureBoundary = gestureBoundaries.current[id];\n                        if (getCurrentPosition() > 0 || !gestureBoundary) {\n                            gestures = true;\n                            break;\n                        }\n                        var scrollOffset = (gestureBoundary === null || gestureBoundary === void 0 ? void 0 : gestureBoundary.scrollOffset) || 0;\n                        if (event.nativeEvent.pageY < (gestureBoundary === null || gestureBoundary === void 0 ? void 0 : gestureBoundary.y) ||\n                            (gesture.vy > 0 && scrollOffset <= 0) ||\n                            getCurrentPosition() !== 0) {\n                            gestures = true;\n                        }\n                        else {\n                            gestures = false;\n                            break;\n                        }\n                    }\n                    if (Platform.OS === 'web') {\n                        if (!gestures) {\n                            //@ts-ignore\n                            panViewRef.current.style.touchAction = 'none';\n                        }\n                        else {\n                            //@ts-ignore\n                            panViewRef.current.style.touchAction = 'auto';\n                        }\n                    }\n                    return gestures;\n                },\n                onStartShouldSetPanResponder: function (event, _gesture) {\n                    if (props.id && !isRenderedOnTop(props.id, contextRef.current))\n                        return false;\n                    if (Platform.OS === 'web') {\n                        var gestures = true;\n                        for (var id in gestureBoundaries.current) {\n                            var gestureBoundary = gestureBoundaries.current[id];\n                            if (getCurrentPosition() > 3 || !gestureBoundary) {\n                                gestures = true;\n                            }\n                            var scrollOffset = (gestureBoundary === null || gestureBoundary === void 0 ? void 0 : gestureBoundary.scrollOffset) || 0;\n                            if (event.nativeEvent.pageY < (gestureBoundary === null || gestureBoundary === void 0 ? void 0 : gestureBoundary.y) ||\n                                scrollOffset <= 0 ||\n                                getCurrentPosition() !== 0) {\n                                gestures = true;\n                            }\n                            else {\n                                gestures = false;\n                            }\n                        }\n                        return gestures;\n                    }\n                    return true;\n                },\n                onPanResponderMove: function (_event, gesture) {\n                    var value = initialValue.current + gesture.dy;\n                    var correctedValue = \n                    //@ts-ignore\n                    value <= minTranslateValue.current\n                        ? //@ts-ignore\n                            minTranslateValue.current - value\n                        : //@ts-ignore\n                            value;\n                    if (\n                    //@ts-ignore\n                    correctedValue / overdrawFactor >= overdrawSize &&\n                        gesture.dy <= 0) {\n                        return;\n                    }\n                    animations.translateY.setValue(value <= minTranslateValue.current\n                        ? overdrawEnabled\n                            ? minTranslateValue.current -\n                                correctedValue / overdrawFactor\n                            : minTranslateValue.current\n                        : value);\n                },\n                onPanResponderEnd: function (_event, gesture) {\n                    var isMovingUp = getCurrentPosition() < initialValue.current;\n                    if ((!isMovingUp &&\n                        getCurrentPosition() <\n                            initialValue.current + springOffset) ||\n                        (isMovingUp &&\n                            getCurrentPosition() > initialValue.current - springOffset)) {\n                        returnAnimation(gesture.vy);\n                        return;\n                    }\n                    if (!isMovingUp) {\n                        snapBackward(gesture.vy);\n                    }\n                    else {\n                        snapForward(gesture.vy);\n                    }\n                }\n            });\n    }, [\n        gestureEnabled,\n        props.id,\n        getCurrentPosition,\n        overdrawFactor,\n        overdrawSize,\n        animations.translateY,\n        overdrawEnabled,\n        springOffset,\n        returnAnimation,\n        snapBackward,\n        snapForward,\n    ]);\n    var onTouch = function () {\n        if (closeOnTouchBackdrop && closable) {\n            hideSheet();\n        }\n    };\n    var onSheetLayout = React.useCallback(function (event) {\n        actionSheetHeight.current = event.nativeEvent.layout.height;\n        minTranslateValue.current =\n            dimensions.height - actionSheetHeight.current;\n        if (initialValue.current < 0) {\n            animations.translateY.setValue(dimensions.height * 1.1);\n        }\n        var nextInitialValue = actionSheetHeight.current +\n            minTranslateValue.current -\n            (actionSheetHeight.current * snapPoints[currentSnapIndex.current]) /\n                100;\n        initialValue.current =\n            (keyboard.keyboardShown || keyboardWasVisible.current) &&\n                initialValue.current <= nextInitialValue &&\n                initialValue.current >= minTranslateValue.current\n                ? initialValue.current\n                : nextInitialValue;\n        if (keyboard.keyboardShown) {\n            keyboardWasVisible.current = true;\n            prevKeyboardHeight.current = keyboard.keyboardHeight;\n        }\n        else {\n            keyboardWasVisible.current = false;\n        }\n        opacityAnimation(1);\n        returnAnimation();\n        if (initialValue.current > 100) {\n            if (lock.current)\n                return;\n            animations.underlayTranslateY.setValue(100);\n        }\n        if (Platform.OS === 'web') {\n            document.body.style.overflowY = 'hidden';\n            document.documentElement.style.overflowY = 'hidden';\n        }\n    }, [\n        animations.translateY,\n        animations.underlayTranslateY,\n        opacityAnimation,\n        returnAnimation,\n        snapPoints,\n        dimensions.height,\n        keyboard.keyboardShown,\n        keyboard.keyboardHeight,\n    ]);\n    var getRef = useCallback(function () { return ({\n        show: function () {\n            setTimeout(function () {\n                setVisible(true);\n            }, 1);\n        },\n        hide: function (data) {\n            hideSheet(data);\n        },\n        setModalVisible: function (_visible) {\n            if (_visible) {\n                setTimeout(function () {\n                    setVisible(true);\n                }, 1);\n            }\n            else {\n                hideSheet();\n            }\n        },\n        snapToOffset: function (offset) {\n            initialValue.current =\n                actionSheetHeight.current +\n                    minTranslateValue.current -\n                    (actionSheetHeight.current * offset) / 100;\n            Animated.spring(animations.translateY, __assign({ toValue: initialValue.current, useNativeDriver: true }, props.openAnimationConfig)).start();\n        },\n        snapToIndex: function (index) {\n            if (index > snapPoints.length || index < 0)\n                return;\n            currentSnapIndex.current = index;\n            initialValue.current = getNextPosition(index);\n            Animated.spring(animations.translateY, __assign({ toValue: initialValue.current, useNativeDriver: true }, props.openAnimationConfig)).start();\n        },\n        handleChildScrollEnd: function () {\n            console.warn('handleChildScrollEnd has been removed. Please use `useScrollHandlers` hook to enable scrolling in ActionSheet');\n        },\n        modifyGesturesForLayout: function (id, layout, scrollOffset) {\n            //@ts-ignore\n            gestureBoundaries.current[id] = __assign(__assign({}, layout), { scrollOffset: scrollOffset });\n        },\n        isGestureEnabled: function () { return gestureEnabled; },\n        isOpen: function () { return visible; }\n    }); }, [\n        animations.translateY,\n        gestureEnabled,\n        getNextPosition,\n        hideSheet,\n        props.openAnimationConfig,\n        setVisible,\n        snapPoints.length,\n        visible,\n    ]);\n    useImperativeHandle(ref, getRef, [getRef]);\n    useEffect(function () {\n        if (props.id) {\n            SheetManager.registerRef(props.id, contextRef.current, {\n                current: getRef()\n            });\n        }\n    }, [getRef, props.id]);\n    var onRequestClose = React.useCallback(function () {\n        hideSheet();\n    }, [hideSheet]);\n    var rootProps = React.useMemo(function () {\n        var _a, _b;\n        return isModal && !props.backgroundInteractionEnabled\n            ? {\n                visible: true,\n                animationType: 'none',\n                testID: ((_a = props.testIDs) === null || _a === void 0 ? void 0 : _a.modal) || props.testID,\n                supportedOrientations: SUPPORTED_ORIENTATIONS,\n                onShow: props.onOpen,\n                onRequestClose: onRequestClose,\n                transparent: true,\n                /**\n                 * Always true, it causes issue with keyboard handling.\n                 */\n                statusBarTranslucent: true\n            }\n            : {\n                testID: ((_b = props.testIDs) === null || _b === void 0 ? void 0 : _b.root) || props.testID,\n                onLayout: function () {\n                    var _a;\n                    hardwareBackPressEvent.current = BackHandler.addEventListener('hardwareBackPress', onHardwareBackPress);\n                    (_a = props === null || props === void 0 ? void 0 : props.onOpen) === null || _a === void 0 ? void 0 : _a.call(props);\n                },\n                style: {\n                    position: 'absolute',\n                    zIndex: zIndex\n                        ? zIndex\n                        : props.id\n                            ? getZIndexFromStack(props.id, contextRef.current)\n                            : 999,\n                    width: '100%',\n                    height: '100%'\n                },\n                pointerEvents: (props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled)\n                    ? 'box-none'\n                    : 'auto'\n            };\n    }, [isModal, onHardwareBackPress, onRequestClose, props, zIndex]);\n    var getPaddingBottom = function () {\n        var _a, _b, _c, _d, _e;\n        var topPadding = Platform.OS === 'android'\n            ? StatusBar.currentHeight && StatusBar.currentHeight > 35\n                ? 35\n                : StatusBar.currentHeight\n            : (safeAreaPaddingTop.current || 0) > 30\n                ? 30\n                : safeAreaPaddingTop.current;\n        if (!props.useBottomSafeAreaPadding && props.containerStyle) {\n            return (((_a = props.containerStyle) === null || _a === void 0 ? void 0 : _a.paddingBottom) || props.containerStyle.padding);\n        }\n        if (!props.containerStyle && (props === null || props === void 0 ? void 0 : props.useBottomSafeAreaPadding)) {\n            return topPadding;\n        }\n        if (((_b = props.containerStyle) === null || _b === void 0 ? void 0 : _b.paddingBottom) === 'string')\n            return props.containerStyle.paddingBottom;\n        if (((_c = props.containerStyle) === null || _c === void 0 ? void 0 : _c.padding) === 'string')\n            return props.containerStyle.padding;\n        if ((_d = props.containerStyle) === null || _d === void 0 ? void 0 : _d.paddingBottom) {\n            //@ts-ignore\n            return topPadding + props.containerStyle.paddingBottom;\n        }\n        if ((_e = props.containerStyle) === null || _e === void 0 ? void 0 : _e.padding) {\n            //@ts-ignore\n            return topPadding + props.containerStyle.padding;\n        }\n        return topPadding;\n    };\n    var paddingBottom = getPaddingBottom();\n    return (<>\n        {Platform.OS === 'ios' ? (<SafeAreaView pointerEvents=\"none\" collapsable={false} onLayout={function (event) {\n                var height = event.nativeEvent.layout.height;\n                if (height !== undefined) {\n                    actionSheetEventManager.publish('safeAreaLayout');\n                    safeAreaPaddingTop.current = event.nativeEvent.layout.height;\n                }\n            }} style={{\n                position: 'absolute',\n                width: 1,\n                left: 0,\n                top: 0,\n                backgroundColor: 'transparent'\n            }}>\n            <View />\n          </SafeAreaView>) : null}\n        {visible ? (<Root {...rootProps}>\n            <Animated.View onLayout={onDeviceLayout} pointerEvents={(props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled) ? 'box-none' : 'auto'} style={[\n                styles.parentContainer,\n                {\n                    opacity: animations.opacity,\n                    width: '100%',\n                    justifyContent: 'flex-end',\n                    paddingBottom: (isModal || Platform.OS === 'ios') && keyboard.keyboardShown\n                        ? keyboard.keyboardHeight\n                        : 0\n                },\n            ]}>\n              {props.withNestedSheetProvider}\n              {ExtraOverlayComponent}\n              {!(props === null || props === void 0 ? void 0 : props.backgroundInteractionEnabled) ? (<TouchableOpacity onPress={onTouch} activeOpacity={defaultOverlayOpacity} testID={(_b = props.testIDs) === null || _b === void 0 ? void 0 : _b.backdrop} style={{\n                    height: Dimensions.get('window').height + 100 ||\n                        dimensions.height +\n                            (safeAreaPaddingTop.current || 0) +\n                            100,\n                    width: '100%',\n                    position: 'absolute',\n                    zIndex: 2,\n                    backgroundColor: overlayColor,\n                    opacity: defaultOverlayOpacity\n                }}/>) : null}\n\n              <Animated.View pointerEvents=\"box-none\" style={__assign(__assign({ borderTopRightRadius: ((_c = props.containerStyle) === null || _c === void 0 ? void 0 : _c.borderTopRightRadius) || 10, borderTopLeftRadius: ((_d = props.containerStyle) === null || _d === void 0 ? void 0 : _d.borderTopLeftRadius) || 10, backgroundColor: ((_e = props.containerStyle) === null || _e === void 0 ? void 0 : _e.backgroundColor) || 'white', borderBottomLeftRadius: ((_f = props.containerStyle) === null || _f === void 0 ? void 0 : _f.borderBottomLeftRadius) || undefined, borderBottomRightRadius: ((_g = props.containerStyle) === null || _g === void 0 ? void 0 : _g.borderBottomRightRadius) || undefined, borderRadius: ((_h = props.containerStyle) === null || _h === void 0 ? void 0 : _h.borderRadius) || undefined, width: ((_j = props.containerStyle) === null || _j === void 0 ? void 0 : _j.width) || '100%' }, getElevation(typeof elevation === 'number' ? elevation : 5)), { flex: undefined, height: dimensions.height, maxHeight: (isModal || Platform.OS === 'ios') && keyboard.keyboardShown\n                    ? dimensions.height - keyboard.keyboardHeight\n                    : dimensions.height, marginBottom: (isModal || Platform.OS === 'ios') && keyboard.keyboardShown\n                    ? keyboard.keyboardHeight\n                    : 0, zIndex: 10, transform: [\n                    {\n                        translateY: animations.translateY\n                    },\n                ] })}>\n                {dimensions.height === 0 ? null : (<Animated.View {...handlers.panHandlers} onLayout={onSheetLayout} ref={panViewRef} testID={(_k = props.testIDs) === null || _k === void 0 ? void 0 : _k.sheet} style={[\n                    styles.container,\n                    {\n                        borderTopRightRadius: 10,\n                        borderTopLeftRadius: 10\n                    },\n                    props.containerStyle,\n                    {\n                        paddingBottom: paddingBottom,\n                        maxHeight: keyboard.keyboardShown\n                            ? dimensions.height - keyboard.keyboardHeight\n                            : dimensions.height\n                    },\n                ]}>\n                    {drawUnderStatusBar ? (<Animated.View style={{\n                        height: 100,\n                        position: 'absolute',\n                        top: -50,\n                        backgroundColor: ((_l = props.containerStyle) === null || _l === void 0 ? void 0 : _l.backgroundColor) || 'white',\n                        width: '100%',\n                        borderRadius: ((_m = props.containerStyle) === null || _m === void 0 ? void 0 : _m.borderRadius) || 10,\n                        transform: [\n                            {\n                                translateY: animations.underlayTranslateY\n                            },\n                        ]\n                    }}/>) : null}\n                    {gestureEnabled || props.headerAlwaysVisible ? (props.CustomHeaderComponent ? (props.CustomHeaderComponent) : (<Animated.View style={[styles.indicator, props.indicatorStyle]}/>)) : null}\n\n                    {props === null || props === void 0 ? void 0 : props.children}\n                  </Animated.View>)}\n                {overdrawEnabled ? (<Animated.View style={{\n                    position: 'absolute',\n                    height: overdrawSize,\n                    bottom: -overdrawSize,\n                    backgroundColor: ((_o = props.containerStyle) === null || _o === void 0 ? void 0 : _o.backgroundColor) || 'white',\n                    width: ((_p = props.containerStyle) === null || _p === void 0 ? void 0 : _p.width) || dimensions.width\n                }}/>) : null}\n              </Animated.View>\n            </Animated.View>\n          </Root>) : null}\n      </>);\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}