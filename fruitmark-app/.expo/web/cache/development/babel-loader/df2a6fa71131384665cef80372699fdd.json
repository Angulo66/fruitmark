{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useState, useEffect } from 'react';\nimport { useAtom, atom } from 'jotai';\nvar cities = atom([]);\nvar fruits = atom([]);\nexport default function useCityFruits() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      cityFruits = _useState2[0],\n      setCityFruits = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useAtom = useAtom(cities),\n      _useAtom2 = _slicedToArray(_useAtom, 2),\n      setCities = _useAtom2[1];\n\n  var _useAtom3 = useAtom(fruits),\n      _useAtom4 = _slicedToArray(_useAtom3, 2),\n      setFruits = _useAtom4[1];\n\n  useEffect(function () {\n    var fetchCityFruits = function () {\n      var _ref = _asyncToGenerator(function* () {\n        try {\n          var axios = require('axios');\n\n          var res = yield axios.get('http://localhost:3000/city_fruits');\n          var citiesData = res.data.map(function (item) {\n            return item.city;\n          });\n          var fruitsData = res.data.map(function (item) {\n            return item.fruits;\n          }).flat().map(function (item) {\n            return item.fruit;\n          });\n          console.log({\n            citiesData: citiesData,\n            fruitsData: fruitsData\n          });\n          setCities(citiesData);\n          setFruits(fruitsData);\n          setCityFruits(res.data);\n          setLoading(false);\n        } catch (err) {\n          console.error(err);\n        }\n      });\n\n      return function fetchCityFruits() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    fetchCityFruits();\n  }, []);\n  return {\n    cityFruits: cityFruits,\n    loading: loading\n  };\n}","map":{"version":3,"names":["useState","useEffect","useAtom","atom","cities","fruits","useCityFruits","cityFruits","setCityFruits","loading","setLoading","setCities","setFruits","fetchCityFruits","axios","require","res","get","citiesData","data","map","item","city","fruitsData","flat","fruit","console","log","err","error"],"sources":["/Users/helder/repos/tests/fruitmark-mini-repo/fruitmark-app/src/hooks/useCityFruits.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useAtom, atom } from 'jotai';\n\nconst cities = atom([]);\nconst fruits = atom([]);\n\nexport default function useCityFruits() {\n  const [cityFruits, setCityFruits] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [, setCities] = useAtom(cities);\n  const [, setFruits] = useAtom(fruits);\n\n  useEffect(() => {\n    const fetchCityFruits = async () => {\n      try {\n        const axios = require('axios');\n        const res = await axios.get('http://localhost:3000/city_fruits');\n\n        // filter res.data get only cities and fruits and store them in cities and fruits atoms\n        const citiesData = res.data.map((item) => item.city);\n        const fruitsData = res.data\n          .map((item) => item.fruits)\n          .flat()\n          .map((item) => item.fruit);\n\n        console.log({ citiesData, fruitsData });\n\n        setCities(citiesData);\n        setFruits(fruitsData);\n\n        setCityFruits(res.data);\n        setLoading(false);\n      } catch (err) {\n        console.error(err);\n      }\n    };\n    fetchCityFruits();\n  }, []);\n\n  return { cityFruits, loading };\n}\n"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,OAAT,EAAkBC,IAAlB,QAA8B,OAA9B;AAEA,IAAMC,MAAM,GAAGD,IAAI,CAAC,EAAD,CAAnB;AACA,IAAME,MAAM,GAAGF,IAAI,CAAC,EAAD,CAAnB;AAEA,eAAe,SAASG,aAAT,GAAyB;EACtC,gBAAoCN,QAAQ,CAAC,EAAD,CAA5C;EAAA;EAAA,IAAOO,UAAP;EAAA,IAAmBC,aAAnB;;EACA,iBAA8BR,QAAQ,CAAC,IAAD,CAAtC;EAAA;EAAA,IAAOS,OAAP;EAAA,IAAgBC,UAAhB;;EACA,eAAsBR,OAAO,CAACE,MAAD,CAA7B;EAAA;EAAA,IAASO,SAAT;;EACA,gBAAsBT,OAAO,CAACG,MAAD,CAA7B;EAAA;EAAA,IAASO,SAAT;;EAEAX,SAAS,CAAC,YAAM;IACd,IAAMY,eAAe;MAAA,6BAAG,aAAY;QAClC,IAAI;UACF,IAAMC,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;UACA,IAAMC,GAAG,SAASF,KAAK,CAACG,GAAN,CAAU,mCAAV,CAAlB;UAGA,IAAMC,UAAU,GAAGF,GAAG,CAACG,IAAJ,CAASC,GAAT,CAAa,UAACC,IAAD;YAAA,OAAUA,IAAI,CAACC,IAAf;UAAA,CAAb,CAAnB;UACA,IAAMC,UAAU,GAAGP,GAAG,CAACG,IAAJ,CAChBC,GADgB,CACZ,UAACC,IAAD;YAAA,OAAUA,IAAI,CAAChB,MAAf;UAAA,CADY,EAEhBmB,IAFgB,GAGhBJ,GAHgB,CAGZ,UAACC,IAAD;YAAA,OAAUA,IAAI,CAACI,KAAf;UAAA,CAHY,CAAnB;UAKAC,OAAO,CAACC,GAAR,CAAY;YAAET,UAAU,EAAVA,UAAF;YAAcK,UAAU,EAAVA;UAAd,CAAZ;UAEAZ,SAAS,CAACO,UAAD,CAAT;UACAN,SAAS,CAACW,UAAD,CAAT;UAEAf,aAAa,CAACQ,GAAG,CAACG,IAAL,CAAb;UACAT,UAAU,CAAC,KAAD,CAAV;QACD,CAlBD,CAkBE,OAAOkB,GAAP,EAAY;UACZF,OAAO,CAACG,KAAR,CAAcD,GAAd;QACD;MACF,CAtBoB;;MAAA,gBAAff,eAAe;QAAA;MAAA;IAAA,GAArB;;IAuBAA,eAAe;EAChB,CAzBQ,EAyBN,EAzBM,CAAT;EA2BA,OAAO;IAAEN,UAAU,EAAVA,UAAF;IAAcE,OAAO,EAAPA;EAAd,CAAP;AACD"},"metadata":{},"sourceType":"module"}